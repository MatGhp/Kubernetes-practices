# This file defines a Deployment in Kubernetes
#
# A Deployment is the recommended way to manage replicated pods in production.
# It creates and manages ReplicaSets under the hood, providing:
#   - Rolling updates: gradually replace old pods with new ones (zero downtime)
#   - Rollbacks: revert to a previous version if something goes wrong
#   - Scaling: easily scale the number of replicas up or down
#   - Self-healing: automatically replaces failed or evicted pods
#   - Update strategies:
#       * RollingUpdate (default): incrementally updates pods with new ones
#       * Recreate: terminates all existing pods before creating new ones
#   - Revision history: keeps track of previous ReplicaSet versions for rollback
#
# Deployment vs ReplicaSet vs ReplicationController:
#   - ReplicationController: deprecated, use ReplicaSet instead
#   - ReplicaSet: not deprecated, but rarely used directly
#   - Deployment (this): the recommended abstraction that manages ReplicaSets for you

apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp-deployment  # Name of the Deployment
spec:
  replicas: 3  # Number of pod replicas to maintain
  selector:
    matchLabels:
      app: myapp  # Selector to match pods with the label 'app: myapp'
      type: frontend  # Additional label to match pods of type 'frontend'
  template:
    metadata:
      labels:
        app: myapp  # Labels applied to the pods created by this Deployment
        type: frontend
    spec:
      containers:
        - name: nginx-container  # Name of the container
          image: nginx  # Docker image to use for the container



# Create a deployment imperatively (command line):
# kubectl create deployment myapp-deployment --image=nginx --replicas=3

# kubectl apply -f 04-deployment-definition.yaml
# kubectl get deployments
# kubectl describe deployment myapp-deployment
# kubectl delete -f 04-deployment-definition.yaml
